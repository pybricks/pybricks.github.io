# pybricks blocks file:{"blocks":{"languageVersion":0,"blocks":[{"type":"blockGlobalSetup","id":"bjK,wS1MYO7aiYkFSwd{","x":172,"y":280,"deletable":false,"next":{"block":{"type":"variables_set_technic_hub","id":"gp(=11-+rR7XV,H(Kz3)","extraState":{"optionLevel":3},"fields":{"VAR":{"id":"i#u8,ZT,l2iPEM`;lnA@"},"FIELDBROADCAST":0,"FIELDOBSERVE0":5},"inputs":{"AXIS_TOP":{"shadow":{"type":"blockParametersAxis","id":"X#%3uk$HRKke7-$x61?_","fields":{"VALUE":"z"}}},"AXIS_FRONT":{"shadow":{"type":"blockParametersAxis","id":"t6svMY`f{#wcs{O_V(3m","fields":{"VALUE":"x"}}}},"next":{"block":{"type":"variables_set_motor","id":"g=O6sK{#.90KNfvnR{3l","fields":{"VAR":{"id":"._x2WX|z0x*L@Q%1?Oey"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"D*][0)m_^se#;]?i?nE~","fields":{"NAME":"A"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"ts6pK}D}12wK?-A7rdcH","fields":{"SELECTION":"Direction.CLOCKWISE"}}}},"next":{"block":{"type":"variables_set_motor","id":"$=xhOYJ^ftcYuvA1[:R8","fields":{"VAR":{"id":"$n#Nfds#E0z.%x{D?N?j"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"p!6p@JZi%jsz4X-{UbX)","fields":{"NAME":"D"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"R$^/X.)X.[ug3MtZ.A3H","fields":{"SELECTION":"Direction.CLOCKWISE"}}}},"next":{"block":{"type":"variables_set_motor","id":"$gK`*.B=^D#Sb*GM}@o0","fields":{"VAR":{"id":"OBSfiq9+`s6)T412+4--"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"1=vO3e10f`.G2/~mNPRF","fields":{"NAME":"B"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"Gzy?NnDeNd6;2}DJNrD(","fields":{"SELECTION":"Direction.CLOCKWISE"}}}},"next":{"block":{"type":"variables_setup_any","id":"PVya@6UaVs-6?tW}Lh^U","fields":{"VAR":{"id":"n_]YQ6iELb+nyPy]]+U:"}},"inputs":{"VALUE0":{"shadow":{"type":"blockMathNumber","id":"7NHOATM7n7ev6M:J{Rw+","fields":{"NUM":0}}}},"next":{"block":{"type":"variables_setup_any","id":"s9?/Lvn.hcI#=5+cLhwQ","fields":{"VAR":{"id":"8w7g{`ViwcpAD;3E!~u+"}},"inputs":{"VALUE0":{"shadow":{"type":"blockMathNumber","id":")+N/:!F`HJiBss){b=(C","fields":{"NUM":0}}}},"next":{"block":{"type":"variables_setup_any","id":"??7xH4OIC/qGE.Bmz0|,","fields":{"VAR":{"id":"vnW2nU]#v`UU)%BHG(/]"}},"inputs":{"VALUE0":{"shadow":{"type":"blockMathNumber","id":"=c?^@d/}|C$4RaHD?6+G","fields":{"NUM":0}}}}}}}}}}}}}}}}}}},{"type":"blockGlobalStart","id":"3tJe|AWl0baN(wH9a$@.","x":170,"y":754,"deletable":false,"next":{"block":{"type":"blockFlowWhile","id":"wco]@xabtlt#dtq|TrZ{","fields":{"MODE":"WHILE"},"inputs":{"BOOL":{"shadow":{"type":"blockLogicTrue","id":"@6BOn#UM|kptQ,+-Gjh#"}},"DO":{"block":{"type":"blockComment","id":"O4fq1kN78eO?UP2y1Qk_","fields":{"FIELDNAME":"Get and unpack data sent from the hub in the base.\nThis unpack block sets the variables to 0 if there is no data."},"next":{"block":{"type":"blockListUnpack","id":"307ic~W}VYEwDztNSIKY","extraState":{"optionLevel":2},"inputs":{"LIST":{"shadow":{"type":"blockListEmpty","id":"l=^}qe#UvB)UHNWUQM^/"},"block":{"type":"blockBleObserve","id":"S:,m#cHuM8(,SLiF#7[g","fields":{"CHANNEL":"5"},"inputs":{"VAR":{"shadow":{"type":"variables_get_ble_hub","id":"e`WUjEf7Ntfvks4`{c|@","fields":{"VAR":{"id":"i#u8,ZT,l2iPEM`;lnA@","name":"hub","type":"TechnicHub"}}}}}}},"VAR":{"shadow":{"type":"variables_get_any","id":"iX^`ei`?E3|I5h,Pi|;;","fields":{"VAR":{"id":"n_]YQ6iELb+nyPy]]+U:","name":"boom speed","type":"Any"}}}},"VAR0":{"shadow":{"type":"variables_get_any","id":"]|:8*jtILbfu/%Ow-Qkm","fields":{"VAR":{"id":"8w7g{`ViwcpAD;3E!~u+","name":"jib speed","type":"Any"}}}},"VAR1":{"shadow":{"type":"variables_get_any","id":"gH]G_T6ye%Ca%_LddL%H","fields":{"VAR":{"id":"vnW2nU]#v`UU)%BHG(/]","name":"hoist speed","type":"Any"}}}}},"next":{"block":{"type":"blockComment","id":"ke=P%VXY*)tfJyXzr=2F","fields":{"FIELDNAME":"Operate the boom."},"next":{"block":{"type":"blockIfElse","id":"k3VV;c{)p%qhuCO!Q1O4","extraState":{"optionLevel":1},"inputs":{"IF0":{"shadow":{"type":"blockLogicTrue","id":"hagrZ8|VDiqh3X`507iV"},"block":{"type":"blockVariableGetValue","id":"q%_{gMR,;ej9hmuxc(Z:","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"gs2rr9JyYDGSHWG`E{wW","fields":{"VAR":{"id":"n_]YQ6iELb+nyPy]]+U:","name":"boom speed","type":"Any"}}}}}}},"DO0":{"block":{"type":"blockMotorRun","id":"Zy8F:`j(*Pd2}~uu`9~M","extraState":{"optionLevel":0},"fields":{"METHOD":"MOTOR_RUN_FOREVER"},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"=!DWATjX]I#!S+an,JFP","fields":{"VAR":{"id":"._x2WX|z0x*L@Q%1?Oey","name":"boom","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angularVelocity","id":"A9mVB:Fww7!Po3Z?V|Wr","fields":{"VALUE0":500}},"block":{"type":"blockMathArithmetic","id":"`]00b5gDm2bI%y!74QS+","fields":{"OP":"MULTIPLY"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"$6y(Ap=O/~ruy4zVBHRO","fields":{"NUM":1}},"block":{"type":"blockVariableGetValue","id":"/~z(jh8m;vO[libomQr,","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"nsyBW]VMNn!r$Zd3+p+5","fields":{"VAR":{"id":"n_]YQ6iELb+nyPy]]+U:","name":"boom speed","type":"Any"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"RcIkNCI5LNMueiJR;q?=","fields":{"NUM":8}}}}}}}}},"ELSE":{"block":{"type":"blockMotorStop","id":"5Bm|]rd;,XX_!VpTYN(p","inputs":{"VAR":{"shadow":{"type":"variables_get_simple_motor_device","id":"rDO@-h#7bI6Thk_nG|7p","fields":{"VAR":{"id":"._x2WX|z0x*L@Q%1?Oey","name":"boom","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"parameters_stop_3","id":"rOqV:1Akqn5K(I?6bgJs","fields":{"VALUE":"Stop.COAST"}}}}}}},"next":{"block":{"type":"blockComment","id":"97}pMbpzKVu#}YSAQ8,/","fields":{"FIELDNAME":"Operate the jib."},"next":{"block":{"type":"blockIfElse","id":")XQv_j~Mg[D/wmh]@aMG","extraState":{"optionLevel":1},"inputs":{"IF0":{"shadow":{"type":"blockLogicTrue","id":"hagrZ8|VDiqh3X`507iV"},"block":{"type":"blockVariableGetValue","id":"O*$XNpCfyY[7MRx.OKm-","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"j*@6GMrk]!4_-C^~fY?H","fields":{"VAR":{"id":"8w7g{`ViwcpAD;3E!~u+","name":"jib speed","type":"Any"}}}}}}},"DO0":{"block":{"type":"blockMotorRun","id":"6n*#Q#][nhabD_[%ejh]","extraState":{"optionLevel":0},"fields":{"METHOD":"MOTOR_RUN_FOREVER"},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"Eku[JwP/Mp?d)ah76,%.","fields":{"VAR":{"id":"$n#Nfds#E0z.%x{D?N?j","name":"jib","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angularVelocity","id":"A9mVB:Fww7!Po3Z?V|Wr","fields":{"VALUE0":500}},"block":{"type":"blockMathArithmetic","id":"lP%#WB]{@i@MX/-fNm~$","fields":{"OP":"MULTIPLY"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"$6y(Ap=O/~ruy4zVBHRO","fields":{"NUM":1}},"block":{"type":"blockVariableGetValue","id":"04/)TN=be[dni~Blbg[c","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":":-kfMi@L$A@||aP%M(e+","fields":{"VAR":{"id":"8w7g{`ViwcpAD;3E!~u+","name":"jib speed","type":"Any"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"[XmOiM-yl{;$!WQW@2$~","fields":{"NUM":8}}}}}}}}},"ELSE":{"block":{"type":"blockMotorStop","id":"it9|R:W.Q:XqKf,Hi_D~","inputs":{"VAR":{"shadow":{"type":"variables_get_simple_motor_device","id":"N=syNkY8CFRprRsNthx%","fields":{"VAR":{"id":"$n#Nfds#E0z.%x{D?N?j","name":"jib","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"parameters_stop_3","id":"XtlFkb1[`P+umBV]f,Pt","fields":{"VALUE":"Stop.COAST"}}}}}}},"next":{"block":{"type":"blockComment","id":"ya5l*WsWRqu%38rw{_;1","fields":{"FIELDNAME":"Operate the hoist."},"next":{"block":{"type":"blockIfElse","id":"/*0VU,R@0pej=L)SC02$","extraState":{"optionLevel":1},"inputs":{"IF0":{"shadow":{"type":"blockLogicTrue","id":"hagrZ8|VDiqh3X`507iV"},"block":{"type":"blockVariableGetValue","id":"B3bKc+TB_%$2p,W5X?PN","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"HUfG,R?#|mvmFPvXlRaJ","fields":{"VAR":{"id":"vnW2nU]#v`UU)%BHG(/]","name":"hoist speed","type":"Any"}}}}}}},"DO0":{"block":{"type":"blockMotorRun","id":"v/pWVg_-^)D}s6gryM@e","extraState":{"optionLevel":0},"fields":{"METHOD":"MOTOR_RUN_FOREVER"},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"r$KgiMUNAtY8uImGVg)S","fields":{"VAR":{"id":"OBSfiq9+`s6)T412+4--","name":"hoist","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angularVelocity","id":"A9mVB:Fww7!Po3Z?V|Wr","fields":{"VALUE0":500}},"block":{"type":"blockMathArithmetic","id":"7gHoS^fq%XW,`K{e11B2","fields":{"OP":"MULTIPLY"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"$6y(Ap=O/~ruy4zVBHRO","fields":{"NUM":1}},"block":{"type":"blockVariableGetValue","id":"c@qG.4vl@~YKBXKs[ntC","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":")BZ--/CfD288C,Zezkvj","fields":{"VAR":{"id":"vnW2nU]#v`UU)%BHG(/]","name":"hoist speed","type":"Any"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":",hL3:$o}kjm]$*E5hT%6","fields":{"NUM":10}}}}}}}}},"ELSE":{"block":{"type":"blockMotorStop","id":"PL^oIahHYL_w(bW!Y,fN","inputs":{"VAR":{"shadow":{"type":"variables_get_simple_motor_device","id":"z~W`Gtl`w?/Ksecv;.`[","fields":{"VAR":{"id":"OBSfiq9+`s6)T412+4--","name":"hoist","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"parameters_stop_3","id":"0o/opA(V!wbx`LrP0^Ag","fields":{"VALUE":"Stop.COAST"}}}}}}},"next":{"block":{"type":"blockWaitTime","id":"NdR7p!{d!K*L_B$SvOmI","inputs":{"VALUE0":{"shadow":{"type":"unit_time","id":"~kQ^@__a(=9ZHRGv_^Ex","fields":{"VALUE0":50}}}}}}}}}}}}}}}}}}}}}}}}}}]},"variables":[{"name":"red","id":"*k/eSiSsxc:qB)!Kqd5{","type":"ColorDef"},{"name":"orange","id":"$k6mO5?H[1`yo$d5,y)p","type":"ColorDef"},{"name":"yellow","id":"F/tUN.IV(ZU?*hYlVmef","type":"ColorDef"},{"name":"green","id":"!3RvaC?EP]fx)4Ov`w$6","type":"ColorDef"},{"name":"cyan","id":"f=Yx7-$|||Ysonu}EU(U","type":"ColorDef"},{"name":"blue","id":"V5P*Y7wk%]%;g5x8;wq[","type":"ColorDef"},{"name":"violet","id":"i7R|%ut339[(.NE0@ase","type":"ColorDef"},{"name":"magenta","id":"vu6)(D9.Fvx}];fSP9jy","type":"ColorDef"},{"name":"white","id":"T]hTr(tgkzCBL1:Wz:F#","type":"ColorDef"},{"name":"none","id":"LPHKZ{MgM40/0}Yxtc#M","type":"ColorDef"},{"name":"hub","id":"i#u8,ZT,l2iPEM`;lnA@","type":"TechnicHub"},{"name":"boom speed","id":"n_]YQ6iELb+nyPy]]+U:","type":"Any"},{"name":"jib speed","id":"8w7g{`ViwcpAD;3E!~u+","type":"Any"},{"name":"hoist speed","id":"vnW2nU]#v`UU)%BHG(/]","type":"Any"},{"name":"boom","id":"._x2WX|z0x*L@Q%1?Oey","type":"Motor"},{"name":"jib","id":"$n#Nfds#E0z.%x{D?N?j","type":"Motor"},{"name":"hoist","id":"OBSfiq9+`s6)T412+4--","type":"Motor"}],"info":{"type":"pybricks","version":"1.2.2"}}
from pybricks.hubs import TechnicHub
from pybricks.parameters import Axis, Direction, Port, Stop
from pybricks.pupdevices import Motor
from pybricks.tools import wait

# Set up all devices.
hub = TechnicHub(top_side=Axis.Z, front_side=Axis.X, broadcast_channel=0, observe_channels=[5])
boom = Motor(Port.A, Direction.CLOCKWISE)
jib = Motor(Port.D, Direction.CLOCKWISE)
hoist = Motor(Port.B, Direction.CLOCKWISE)

# Initialize variables.
boom_speed = 0
jib_speed = 0
hoist_speed = 0


# The main program starts here.
while True:
    # Get and unpack data sent from the hub in the base.
    # This unpack block sets the variables to 0 if there is no data.
    boom_speed, jib_speed, hoist_speed = hub.ble.observe(5) or [0] * 3
    # Operate the boom.
    if boom_speed:
        boom.run(boom_speed * 8)
    else:
        boom.stop()
    # Operate the jib.
    if jib_speed:
        jib.run(jib_speed * 8)
    else:
        jib.stop()
    # Operate the hoist.
    if hoist_speed:
        hoist.run(hoist_speed * 10)
    else:
        hoist.stop()
    wait(50)
